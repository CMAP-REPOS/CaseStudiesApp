<!DOCTYPE html>
<html>
<head>
	<title>CMAP Case Studies Library</title>
	<meta charset="utf-8" />

	<link rel="stylesheet" href="src/css/fullscreen.css" />
	
	<!-- Leaflet -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.ie.css" /><![endif]-->
	<script src="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js" type="text/javascript"></script>

	<!-- Case Studies Data -->
	<script src="src/js/Citizen_Profile.js"></script>	
	<script src="src/js/Community_Development.js"></script>	
	<script src="src/js/Completed_LTA_Project.js"></script>	
	<script src="src/js/Economic_Development.js"></script>	
	<script src="src/js/Environment.js"></script>	
	<script src="src/js/Housing.js"></script>	
	<script src="src/js/Land_Use.js"></script>	
	<script src="src/js/Transportation.js"></script>
	
	<script src="src/js/Case_Studies.js"></script>	
	
	<!-- Leaflet Plugins -->
	<link rel="stylesheet" href="src/css/Control.MiniMap.css" />
	<script src="src/js/Control.MiniMap.js" type="text/javascript"></script>
	
	<script src="src/js/leaflet-search.js"></script>
	<link rel="stylesheet" href="src/css/leaflet-search.css" />
	
	<script src="src/js/l.control.geosearch.js"></script>
	<script src="src/js/l.geosearch.provider.google.js"></script>
	<script src="http://maps.googleapis.com/maps/api/js?&key=AIzaSyBkZvruAqjHD2fcf-swenX2Y6EiM3DVKhg&sensor=false&amp;libraries=places"></script>
	<link rel="stylesheet" href="src/css/l.geosearch.css" />	
	
</head>
<body>
		<div id="map" ></div>

	<script type="text/javascript">
		
		//Create main map variable
		var map = L.map('map',{
						center:[41.87, -88.04], 
						zoom: 9
					});
		
		//Define basemaps and add to main map
		var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
		//http://{s}.tile.cloudmade.com/3131bff15d8146c98df912085c838a8e/3/256/{z}/{x}/{y}.png
		var osmAttrib='Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>';
		var osm = new L.TileLayer(osmUrl, {minZoom: 6, maxZoom: 18, attribution: osmAttrib});
		map.addLayer(osm);	

		var aerUrl='http://otile2.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.png';
		var aerAttrib='Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest</a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png">';
		var aer = new L.TileLayer(aerUrl, {minZoom: 6, maxZoom: 18, attribution: aerAttrib});

		
		//Set style of case studies layers and add to map
        citizenProfileLayer = L.geoJson(citizenProfile, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#FDB462",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });
        map.addLayer(citizenProfileLayer); 		

        communityDevelopmentLayer = L.geoJson(communityDevelopment, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#BEBADA",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        map.addLayer(communityDevelopmentLayer); 

        completedLTAProjectLayer = L.geoJson(completedLTAProject, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#1F497D",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        map.addLayer(completedLTAProjectLayer); 

        economicDevelopmentLayer = L.geoJson(economicDevelopment, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#8DD3C7",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        map.addLayer(economicDevelopmentLayer); 

        environmentLayer = L.geoJson(environment, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#B3DE69",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        map.addLayer(environmentLayer); 

        housingLayer = L.geoJson(housing, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#FFFFB3",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        map.addLayer(housingLayer); 

        landUseLayer = L.geoJson(landUse, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#FB8072",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        map.addLayer(landUseLayer); 

        transportationLayer = L.geoJson(transportation, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#80B1D3",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
					fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        map.addLayer(transportationLayer); 

			
		// Define layer groups and add to map
		var baseMaps = {
			"Streets": osm,
			"Aerials": aer
		};
		
		var overlayMaps = {
			"Citizen Profiles": citizenProfileLayer,
			"Community Development": communityDevelopmentLayer,
			"Completed LTA Project": completedLTAProjectLayer,
			"Economic Development": economicDevelopmentLayer,
			"Environment": environmentLayer,
			"Housing": housingLayer,
			"Land Use": landUseLayer,
			"Transportation": transportationLayer
			
		};
		
		L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);
		
		//Define mini-map
		var miniUrl='http://{s}.tile.cloudmade.com/3131bff15d8146c98df912085c838a8e/998/256/{z}/{x}/{y}.png';
		var miniAttrib='Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>';
		var mini = new L.TileLayer(miniUrl, {minZoom: 2, maxZoom: 18, attribution: miniAttrib});

		//Add mini-map control
		var miniMap = new L.Control.MiniMap(mini, {aimingRectOptions: color='#03f',zoomLevelFixed: 9,  autoToggleDisplay: true, 
			width: 250,
			height: 250
		}).addTo(map);
		
		//Add geo-search control
		new L.Control.GeoSearch({ 
			provider: new L.GeoSearch.Provider.Google({
				language: 'en',
				region: 'US'
			})
		}).addTo(map);


	</script>
</body>
</html>
