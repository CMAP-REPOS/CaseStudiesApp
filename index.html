<!DOCTYPE html>
<html>
<head>
	<title>CMAP Case Studies Library</title>
	<meta charset="utf-8" />

	<link rel="stylesheet" href="src/css/fullscreen.css" />
	
	<!-- Leaflet -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.ie.css" /><![endif]-->
	<script src="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js" type="text/javascript"></script>

	<!-- GeoJSON Data -->
	<script src="src/js/Citizen_Profile.js"></script>	
	<script src="src/js/Community_Development.js"></script>	
	<script src="src/js/Completed_LTA_Project.js"></script>	
	<script src="src/js/Economic_Development.js"></script>	
	<script src="src/js/Environment.js"></script>	
	<script src="src/js/Housing.js"></script>	
	<script src="src/js/Land_Use.js"></script>	
	<script src="src/js/Transportation.js"></script>
	<script src="src/js/CountyOutlines.js"></script>
	
	<script src="src/js/Case_Studies.js"></script>	
	
	<!-- Leaflet Plugins -->
	<link rel="stylesheet" href="src/css/Control.MiniMap.css" />
	<script src="src/js/Control.MiniMap.js" type="text/javascript"></script>
	
	<script src="src/js/leaflet-search.js"></script>
	<link rel="stylesheet" href="src/css/leaflet-search.css" />
	
	<script src="src/js/l.control.geosearch.js"></script>
	<script src="src/js/l.geosearch.provider.google.js"></script>
	<script src="http://maps.googleapis.com/maps/api/js?&key=AIzaSyBkZvruAqjHD2fcf-swenX2Y6EiM3DVKhg&sensor=false&amp;libraries=places"></script>
	<link rel="stylesheet" href="src/css/l.geosearch.css" />
	<script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.2.4"></script>
	
</head>
<body>
	
	<div id="map" ></div>

	<script type="text/javascript">
		
		//Create main map variable
		var map = L.map('map',{
						center:[41.87, -88.04], 
						zoom: 9
					});
		
		//Define basemaps and add to main map
		var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
		//http://{s}.tile.cloudmade.com/3131bff15d8146c98df912085c838a8e/3/256/{z}/{x}/{y}.png
		var osmAttrib='Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>';
		var osm = new L.TileLayer(osmUrl, {minZoom: 6, maxZoom: 18, attribution: osmAttrib});
		map.addLayer(osm);	

		var aerUrl='http://otile2.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.png';
		var aerAttrib='Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest</a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png">';
		var aer = new L.TileLayer(aerUrl, {minZoom: 6, maxZoom: 18, attribution: aerAttrib});


		// Define County Border style and add to map
		var countyStyle = {color: '#33334C', weight: 2, opacity:0.9, fillOpacity:0};
		countyOutlineLayer = L.geoJson(countyOutlines, {
			style: countyStyle
		});
		map.addLayer(countyOutlineLayer);

		//Set style of case studies layers and add to map
        citizenProfileLayer = L.geoJson(citizenProfile, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#FDB462",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });
        citizenProfileLayerZoom = L.geoJson(citizenProfile, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 12,
                    fillColor: "#FDB462",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

		map.addLayer(citizenProfileLayer);
		map.on('zoomend', function(e) {
			 if ( map.getZoom() > 12 ){ map.removeLayer(citizenProfileLayer), map.addLayer(citizenProfileLayerZoom)}
			 else if ( map.getZoom() <= 12 ){ map.removeLayer(citizenProfileLayerZoom), map.addLayer(citizenProfileLayer)}
		});		
	

        communityDevelopmentLayer = L.geoJson(communityDevelopment, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#BEBADA",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

		communityDevelopmentLayerZoom = L.geoJson(communityDevelopment, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 12,
                    fillColor: "#BEBADA",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });
		
        map.addLayer(communityDevelopmentLayer); 
		map.on('zoomend', function(e) {
			 if ( map.getZoom() > 12 ){ map.removeLayer(communityDevelopmentLayer), map.addLayer(communityDevelopmentLayerZoom)}
			 else if ( map.getZoom() <= 12 ){ map.removeLayer(communityDevelopmentLayerZoom), map.addLayer(communityDevelopmentLayer)}
		});	
		
        completedLTAProjectLayer = L.geoJson(completedLTAProject, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#1F497D",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        completedLTAProjectLayerZoom = L.geoJson(completedLTAProject, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 12,
                    fillColor: "#1F497D",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });
		
        map.addLayer(completedLTAProjectLayer); 
		map.on('zoomend', function(e) {
			 if ( map.getZoom() > 12 ){ map.removeLayer(completedLTAProjectLayer), map.addLayer(completedLTAProjectLayerZoom)}
			 else if ( map.getZoom() <= 12 ){ map.removeLayer(completedLTAProjectLayerZoom), map.addLayer(completedLTAProjectLayer)}
		});	
		
        economicDevelopmentLayer = L.geoJson(economicDevelopment, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#8DD3C7",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        economicDevelopmentLayerZoom = L.geoJson(economicDevelopment, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 12,
                    fillColor: "#8DD3C7",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });
		
        map.addLayer(economicDevelopmentLayer); 
		map.on('zoomend', function(e) {
			 if ( map.getZoom() > 12 ){ map.removeLayer(economicDevelopmentLayer), map.addLayer(economicDevelopmentLayerZoom)}
			 else if ( map.getZoom() <= 12 ){ map.removeLayer(economicDevelopmentLayerZoom), map.addLayer(economicDevelopmentLayer)}
		});	
		
        environmentLayer = L.geoJson(environment, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#B3DE69",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        environmentLayerZoom = L.geoJson(environment, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 12,
                    fillColor: "#B3DE69",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });
		
        map.addLayer(environmentLayer); 
		map.on('zoomend', function(e) {
			 if ( map.getZoom() > 12 ){ map.removeLayer(environmentLayer), map.addLayer(environmentLayerZoom)}
			 else if ( map.getZoom() <= 12 ){ map.removeLayer(environmentLayerZoom), map.addLayer(environmentLayer)}
		});	
		
        housingLayer = L.geoJson(housing, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#FFFFB3",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        housingLayerZoom = L.geoJson(housing, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 12,
                    fillColor: "#FFFFB3",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });
		
        map.addLayer(housingLayer); 
		map.on('zoomend', function(e) {
			 if ( map.getZoom() > 12 ){ map.removeLayer(housingLayer), map.addLayer(housingLayerZoom)}
			 else if ( map.getZoom() <= 12 ){ map.removeLayer(housingLayerZoom), map.addLayer(housingLayer)}
		});	
		
        landUseLayer = L.geoJson(landUse, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#FB8072",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        landUseLayerZoom = L.geoJson(landUse, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 12,
                    fillColor: "#FB8072",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });
		
        map.addLayer(landUseLayer); 
		map.on('zoomend', function(e) {
			 if ( map.getZoom() > 12 ){ map.removeLayer(landUseLayer), map.addLayer(landUseLayerZoom)}
			 else if ( map.getZoom() <= 12 ){ map.removeLayer(landUseLayerZoom), map.addLayer(landUseLayer)}
		});	
		
        transportationLayer = L.geoJson(transportation, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 6,
                    fillColor: "#80B1D3",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
					fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });

        transportationLayerZoom = L.geoJson(transportation, {                
            pointToLayer: function (feature, latlng) {                    
                return new L.CircleMarker(latlng, {
                    radius: 12,
                    fillColor: "#80B1D3",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
					fillOpacity: 1
                });
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<b>Project Name: </b>"+feature.properties.Name+"<br><b>Location: </b>"+feature.properties.Location_o+"<br><br><b>Description: </b>"+feature.properties.Brief_Overview+"<br><b><a href="+feature.properties.More_infor+">More Info</a></b><br><br><b>Tags: </b>"+feature.properties.Related_To);
        }
        });		
		
        map.addLayer(transportationLayer); 
		map.on('zoomend', function(e) {
			 if ( map.getZoom() > 12 ){ map.removeLayer(transportationLayer), map.addLayer(transportationLayerZoom)}
			 else if ( map.getZoom() <= 12 ){ map.removeLayer(transportationLayerZoom), map.addLayer(transportationLayer)}
		});	

		
		// Define layer groups and add to map legend
		var baseMaps = {
			"Streets": osm,
			"Aerials": aer
		};

		var overlayMaps = {
			"<img src='src\\images\\icon_citizenProfiles.png'> Citizen Profiles": citizenProfileLayer,
			"<img src='src\\images\\icon_communityDevelopment.png'> Community Development": communityDevelopmentLayer,
			"<img src='src\\images\\icon_completedLTAProject.png'> Completed LTA Project": completedLTAProjectLayer,
			"<img src='src\\images\\icon_economicDevelopment.png'> Economic Development": economicDevelopmentLayer,
			"<img src='src\\images\\icon_environment.png'> Environment": environmentLayer,
			"<img src='src\\images\\icon_housing.png'> Housing": housingLayer,
			"<img src='src\\images\\icon_landUse.png'> Land Use": landUseLayer,
			"<img src='src\\images\\icon_transportation.png'> Transportation": transportationLayer
			
		};

		var legend = new L.control.layers(baseMaps, overlayMaps, {
			collapsed: false
		}).addTo(map);
		
	
		//Add geo-search
		new L.Control.GeoSearch({
			position:'topright',
			provider: new L.GeoSearch.Provider.Google({
				language: 'en',
				region: 'US'
			})
		}).addTo(map);
		
		
		//Add overview map
		var miniURL = new L.StamenTileLayer("toner")
		////var miniURL = new L.TileLayer(osmUrl);
		var rect1 = {color: '#3366FF', weight: 3, opacity:1, fillOpacity:0};
		var miniMap = new L.Control.MiniMap(miniURL, {aimingRectOptions: rect1, 
			zoomLevelFixed: 7, 
			autoToggleDisplay: false,
			width: 250,
			height:200
		}).addTo(map);
		
		//Add scale bar
		L.control.scale({
			imperial: true,
			metric: true
		}).addTo(map);
		


	</script>
</body>
</html>
